{"version":3,"sources":["file:///C:/Users/ASUS/MindYourStep_1/assets/Script/GameManager.ts"],"names":["_decorator","Component","Prefab","instantiate","CCInteger","ccclass","property","BlockType","GameManager","type","_road","_curState","GameState","GS_INIT","start","generateRoad","node","removeAllChildren","push","BT_STONE","i","roadLength","BT_NONE","Math","floor","random","j","length","block","spawnBlockByType","addChild","setPosition","cubePrfb"],"mappings":";;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,S,OAAAA,S;;;;;;;OACrD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;iBAEzBO,S;AAAAA,QAAAA,S,CAAAA,S;AAAAA,QAAAA,S,CAAAA,S;SAAAA,S,KAAAA,S;;AAGJ;;6BAGYC,W,WADZH,OAAO,CAAC,aAAD,C,UAGHC,QAAQ,CAAC;AAACG,QAAAA,IAAI,EAAEP;AAAP,OAAD,C,UAERI,QAAQ,CAAC;AAACG,QAAAA,IAAI,EAAEL;AAAP,OAAD,C,2BALb,MACaI,WADb,SACiCP,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAM/BS,KAN+B,GAMb,EANa;AAAA,eAS/BC,SAT+B,GASRC,SAAS,CAACC,OATF;AAAA;;AAUvCC,QAAAA,KAAK,GAAI;AACL,eAAKC,YAAL;AACH;;AAEDA,QAAAA,YAAY,GAAG;AAEX,eAAKC,IAAL,CAAUC,iBAAV;AAEA,eAAKP,KAAL,GAAa,EAAb,CAJW,CAKX;;AACA,eAAKA,KAAL,CAAWQ,IAAX,CAAgBX,SAAS,CAACY,QAA1B;;AAEA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKC,UAAzB,EAAqCD,CAAC,EAAtC,EAA0C;AACtC,gBAAI,KAAKV,KAAL,CAAWU,CAAC,GAAC,CAAb,MAAoBb,SAAS,CAACe,OAAlC,EAA2C;AACvC,mBAAKZ,KAAL,CAAWQ,IAAX,CAAgBX,SAAS,CAACY,QAA1B;AACH,aAFD,MAEO;AACH,mBAAKT,KAAL,CAAWQ,IAAX,CAAgBK,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,CAA3B,CAAhB;AACH;AACJ;;AAED,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKhB,KAAL,CAAWiB,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AACxC,gBAAIE,KAAW,GAAG,KAAKC,gBAAL,CAAsB,KAAKnB,KAAL,CAAWgB,CAAX,CAAtB,CAAlB;;AACA,gBAAIE,KAAJ,EAAW;AACP,mBAAKZ,IAAL,CAAUc,QAAV,CAAmBF,KAAnB;AACAA,cAAAA,KAAK,CAACG,WAAN,CAAkBL,CAAlB,EAAqB,CAAC,GAAtB,EAA2B,CAA3B;AACH;AACJ;AACJ;;AAEDG,QAAAA,gBAAgB,CAACpB,IAAD,EAAkB;AAC9B,cAAI,CAAC,KAAKuB,QAAV,EAAoB;AAChB,mBAAO,IAAP;AACH;;AAED,cAAIJ,KAAgB,GAAG,IAAvB;;AACA,kBAAOnB,IAAP;AACI,iBAAKF,SAAS,CAACY,QAAf;AACIS,cAAAA,KAAK,GAAGzB,WAAW,CAAC,KAAK6B,QAAN,CAAnB;AACA;AAHR;;AAMA,iBAAOJ,KAAP;AACH,SApDsC,CAsDvC;AACA;AACA;;;AAxDuC,O;;;;;iBAGR,I;;;;;;;iBAEH,E","sourcesContent":["import { _decorator, Component, Prefab, instantiate, Node, CCInteger} from 'cc';\nconst { ccclass, property } = _decorator;\n\nenum BlockType{\n    BT_NONE,\n    BT_STONE,\n};\n\n@ccclass(\"GameManager\")\nexport class GameManager extends Component {\n\n    @property({type: Prefab})\n    public cubePrfb: Prefab|null = null;\n    @property({type: CCInteger})\n    public roadLength: Number = 50;\n    private _road: number[] = [];\n    \n\n    private _curState: GameState = GameState.GS_INIT;\n    start () {\n        this.generateRoad();\n    }\n\n    generateRoad() {\n\n        this.node.removeAllChildren();\n\n        this._road = [];\n        // startPos\n        this._road.push(BlockType.BT_STONE);\n\n        for (let i = 1; i < this.roadLength; i++) {\n            if (this._road[i-1] === BlockType.BT_NONE) {\n                this._road.push(BlockType.BT_STONE);\n            } else {\n                this._road.push(Math.floor(Math.random() * 2));\n            }\n        }\n\n        for (let j = 0; j < this._road.length; j++) {\n            let block: Node = this.spawnBlockByType(this._road[j]);\n            if (block) {\n                this.node.addChild(block);\n                block.setPosition(j, -1.5, 0);\n            }\n        }\n    }\n\n    spawnBlockByType(type: BlockType) {\n        if (!this.cubePrfb) {\n            return null;\n        }\n\n        let block: Node|null = null;\n        switch(type) {\n            case BlockType.BT_STONE:\n                block = instantiate(this.cubePrfb);\n                break;\n        }\n\n        return block;\n    }\n\n    // update (deltaTime: number) {\n    //     // Your update function goes here.\n    // }\n}\n\n"]}